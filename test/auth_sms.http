### 认证API测试文件
### 基础URL配置
@baseUrl = http://localhost:8080
@contentType = application/json

### ============================================
### 1. 发送注册验证码
### ============================================
POST {{baseUrl}}/api/auth/send-code
Content-Type: {{contentType}}

{
  "phone_number": "13800138000",
  "code_type": "register"
}

### ============================================
### 2. 手机号+验证码注册
### ============================================
POST {{baseUrl}}/api/auth/register-sms
Content-Type: {{contentType}}

{
  "phone_number": "13800138000",
  "code": "123456"
}

### ============================================
### 3. 发送登录验证码
### ============================================
POST {{baseUrl}}/api/auth/send-code
Content-Type: {{contentType}}

{
  "phone_number": "13800138000",
  "code_type": "login"
}

### ============================================
### 4. 手机号+验证码登录
### ============================================
POST {{baseUrl}}/api/auth/login-sms
Content-Type: {{contentType}}

{
  "phone_number": "13800138000",
  "code": "123456"
}

### ============================================
### 5. 手机号+密码登录
### ============================================
POST {{baseUrl}}/api/auth/login-password
Content-Type: {{contentType}}

{
  "phone_number": "13800138001",
  "password": "password123"
}

### ============================================
### 测试场景：完整注册流程
### ============================================

### 步骤1: 发送注册验证码
POST {{baseUrl}}/api/auth/send-code
Content-Type: {{contentType}}

{
  "phone_number": "13900139000",
  "code_type": "register"
}

### 步骤2: 使用验证码注册（需要替换为实际收到的验证码）
POST {{baseUrl}}/api/auth/register-sms
Content-Type: {{contentType}}

{
  "phone_number": "13900139000",
  "code": "请替换为实际验证码"
}

### ============================================
### 测试场景：完整登录流程（验证码登录）
### ============================================

### 步骤1: 发送登录验证码
POST {{baseUrl}}/api/auth/send-code
Content-Type: {{contentType}}

{
  "phone_number": "13900139000",
  "code_type": "login"
}

### 步骤2: 使用验证码登录
POST {{baseUrl}}/api/auth/login-sms
Content-Type: {{contentType}}

{
  "phone_number": "13900139000",
  "code": "请替换为实际验证码"
}

### ============================================
### 异常测试：手机号格式错误
### ============================================
POST {{baseUrl}}/api/auth/send-code
Content-Type: {{contentType}}

{
  "phone_number": "138001380",
  "code_type": "register"
}

### ============================================
### 异常测试：验证码类型错误
### ============================================
POST {{baseUrl}}/api/auth/send-code
Content-Type: {{contentType}}

{
  "phone_number": "13800138000",
  "code_type": "invalid_type"
}

### ============================================
### 异常测试：验证码错误
### ============================================
POST {{baseUrl}}/api/auth/register-sms
Content-Type: {{contentType}}

{
  "phone_number": "13800138000",
  "code": "000000"
}

### ============================================
### 异常测试：验证码过期
### ============================================
# 等待5分钟后再测试
POST {{baseUrl}}/api/auth/register-sms
Content-Type: {{contentType}}

{
  "phone_number": "13800138000",
  "code": "123456"
}

### ============================================
### 异常测试：重复注册
### ============================================
POST {{baseUrl}}/api/auth/send-code
Content-Type: {{contentType}}

{
  "phone_number": "13800138000",
  "code_type": "register"
}

### ============================================
### 异常测试：未注册用户登录
### ============================================
POST {{baseUrl}}/api/auth/send-code
Content-Type: {{contentType}}

{
  "phone_number": "19999999999",
  "code_type": "login"
}

### ============================================
### 异常测试：密码登录但未设置密码
### ============================================
POST {{baseUrl}}/api/auth/login-password
Content-Type: {{contentType}}

{
  "phone_number": "13800138000",
  "password": "any_password"
}

### ============================================
### 异常测试：密码错误
### ============================================
POST {{baseUrl}}/api/auth/login-password
Content-Type: {{contentType}}

{
  "phone_number": "13800138001",
  "password": "wrong_password"
}

### ============================================
### 异常测试：频繁发送验证码（60秒内）
### ============================================
POST {{baseUrl}}/api/auth/send-code
Content-Type: {{contentType}}

{
  "phone_number": "13800138000",
  "code_type": "register"
}

### 立即再次发送（应该失败）
POST {{baseUrl}}/api/auth/send-code
Content-Type: {{contentType}}

{
  "phone_number": "13800138000",
  "code_type": "register"
}
