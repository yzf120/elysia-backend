syntax = "proto3";

package trpc.elysia.backend.conversation;
option go_package="github.com/yzf120/elysia-backend/proto/conversation";

service ConversationService {
  rpc CreateConversation (CreateConversationRequest) returns (CreateConversationResponse) {}
  rpc GetConversation (GetConversationRequest) returns (GetConversationResponse) {}
  rpc SendMessage (SendMessageRequest) returns (SendMessageResponse) {}
}

message CreateConversationRequest {
  string title = 1;
  repeated string participants = 2;
}

message CreateConversationResponse {
  string conversation_id = 1;
  string title = 2;
  repeated string participants = 3;
  string created_at = 4;
}

message GetConversationRequest {
  string conversation_id = 1;
}

message GetConversationResponse {
  string conversation_id = 1;
  string title = 2;
  repeated string participants = 3;
  repeated Message messages = 4;
  string created_at = 5;
}

message SendMessageRequest {
  string conversation_id = 1;
  string sender = 2;
  string content = 3;
}

message SendMessageResponse {
  string message_id = 1;
  string conversation_id = 2;
  string sender = 3;
  string content = 4;
  string sent_at = 5;
}

message Message {
  string message_id = 1;
  string sender = 2;
  string content = 3;
  string sent_at = 4;
}