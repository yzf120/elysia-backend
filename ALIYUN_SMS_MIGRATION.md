[//]: # (# ğŸš€ é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡è¿ç§»æŒ‡å—)

[//]: # ()
[//]: # (## ğŸ“‹ è¿ç§»æ¦‚è¿°)

[//]: # ()
[//]: # (æœ¬æ¬¡æ›´æ–°å°†çŸ­ä¿¡æœåŠ¡ä»**è…¾è®¯äº‘SMS**è¿ç§»åˆ°**é˜¿é‡Œäº‘å·ç è®¤è¯æœåŠ¡ï¼ˆDypnsapiï¼‰**ï¼Œå®ç°æ›´ç¨³å®šã€æ›´é«˜æ•ˆçš„çŸ­ä¿¡éªŒè¯ç å‘é€åŠŸèƒ½ã€‚)

[//]: # ()
[//]: # (### è¿ç§»æ—¶é—´)

[//]: # (**2026-02-06**)

[//]: # ()
[//]: # (### å½±å“èŒƒå›´)

[//]: # (- âœ… å­¦ç”Ÿç«¯ï¼šæ³¨å†ŒéªŒè¯ç ã€ç™»å½•éªŒè¯ç )

[//]: # (- âœ… æ•™å¸ˆç«¯ï¼šæ³¨å†ŒéªŒè¯ç ã€ç™»å½•éªŒè¯ç )

[//]: # (- âœ… ç®¡ç†å‘˜ç«¯ï¼šç™»å½•éªŒè¯ç )

[//]: # ()
[//]: # (---)

[//]: # ()
[//]: # (## ğŸ”„ ä¸»è¦å˜æ›´)

[//]: # ()
[//]: # (### 1. ä¾èµ–å˜æ›´)

[//]: # ()
[//]: # (#### ç§»é™¤çš„ä¾èµ–ï¼ˆè…¾è®¯äº‘ï¼‰)

[//]: # (```go)

[//]: # (github.com/tencentcloud/tencentcloud-sdk-go/tencentcloud/common v1.3.22)

[//]: # (github.com/tencentcloud/tencentcloud-sdk-go/tencentcloud/sms v1.1.49)

[//]: # (```)

[//]: # ()
[//]: # (#### æ–°å¢çš„ä¾èµ–ï¼ˆé˜¿é‡Œäº‘ï¼‰)

[//]: # (```go)

[//]: # (github.com/alibabacloud-go/darabonba-openapi/v2 v2.0.10)

[//]: # (github.com/alibabacloud-go/dypnsapi-20170525/v3 v3.0.6)

[//]: # (github.com/alibabacloud-go/tea v1.2.2)

[//]: # (github.com/alibabacloud-go/tea-utils/v2 v2.0.6)

[//]: # (github.com/aliyun/credentials-go v1.3.7)

[//]: # (```)

[//]: # ()
[//]: # (### 2. æ–‡ä»¶å˜æ›´)

[//]: # ()
[//]: # (#### ä¿®æ”¹çš„æ–‡ä»¶)

[//]: # (1. **`utils/sms_util.go`**)

[//]: # (   - ä» `TencentSMSClient` æ”¹ä¸º `AliyunSMSClient`)

[//]: # (   - å®ç°é˜¿é‡Œäº‘çŸ­ä¿¡å‘é€é€»è¾‘)

[//]: # ()
[//]: # (2. **`service/sms_service.go`**)

[//]: # (   - æ›´æ–°å®¢æˆ·ç«¯å¼•ç”¨)

[//]: # (   - è°ƒæ•´ç¯å¢ƒå˜é‡é…ç½®)

[//]: # ()
[//]: # (3. **`go.mod`**)

[//]: # (   - æ›´æ–°ä¾èµ–åŒ…)

[//]: # ()
[//]: # (4. **`.env.example`**)

[//]: # (   - æ›´æ–°ç¯å¢ƒå˜é‡é…ç½®è¯´æ˜)

[//]: # ()
[//]: # (---)

[//]: # ()
[//]: # (## âš™ï¸ é…ç½®æ­¥éª¤)

[//]: # ()
[//]: # (### ç¬¬ä¸€æ­¥ï¼šå®‰è£…ä¾èµ–)

[//]: # ()
[//]: # (```bash)

[//]: # (cd /Users/sylvainyang/project/elysia/elysia-backend)

[//]: # ()
[//]: # (# æ¸…ç†æ—§ä¾èµ–)

[//]: # (go mod tidy)

[//]: # ()
[//]: # (# ä¸‹è½½æ–°ä¾èµ–)

[//]: # (go get github.com/alibabacloud-go/dypnsapi-20170525/v3)

[//]: # (go get github.com/alibabacloud-go/darabonba-openapi/v2)

[//]: # (go get github.com/alibabacloud-go/tea)

[//]: # (go get github.com/alibabacloud-go/tea-utils/v2)

[//]: # (go get github.com/aliyun/credentials-go)

[//]: # ()
[//]: # (# å†æ¬¡æ•´ç†ä¾èµ–)

[//]: # (go mod tidy)

[//]: # (```)

[//]: # ()
[//]: # (### ç¬¬äºŒæ­¥ï¼šé…ç½®é˜¿é‡Œäº‘å‡­è¯)

[//]: # ()
[//]: # (#### æ–¹å¼ä¸€ï¼šç¯å¢ƒå˜é‡é…ç½®ï¼ˆæ¨èï¼‰)

[//]: # ()
[//]: # (åœ¨ `.env` æ–‡ä»¶ä¸­æ·»åŠ ï¼š)

[//]: # ()
[//]: # (```bash)

[//]: # (# é˜¿é‡Œäº‘AccessKey ID)

[//]: # (ALIBABA_CLOUD_ACCESS_KEY_ID=your-access-key-id)

[//]: # ()
[//]: # (# é˜¿é‡Œäº‘AccessKey Secret)

[//]: # (ALIBABA_CLOUD_ACCESS_KEY_SECRET=your-access-key-secret)

[//]: # ()
[//]: # (# é˜¿é‡Œäº‘çŸ­ä¿¡ç­¾å)

[//]: # (ALIYUN_SMS_SIGN_NAME=é€Ÿé€šäº’è”éªŒè¯ç )

[//]: # ()
[//]: # (# é˜¿é‡Œäº‘çŸ­ä¿¡æ¨¡æ¿CODE)

[//]: # (ALIYUN_SMS_TEMPLATE_CODE=100001)

[//]: # (```)

[//]: # ()
[//]: # (#### æ–¹å¼äºŒï¼šé…ç½®æ–‡ä»¶ï¼ˆæ›´å®‰å…¨ï¼‰)

[//]: # ()
[//]: # (åˆ›å»º `~/.alibabacloud/credentials` æ–‡ä»¶ï¼š)

[//]: # ()
[//]: # (```ini)

[//]: # ([default])

[//]: # (type = access_key)

[//]: # (access_key_id = your-access-key-id)

[//]: # (access_key_secret = your-access-key-secret)

[//]: # (```)

[//]: # ()
[//]: # (### ç¬¬ä¸‰æ­¥ï¼šè·å–é˜¿é‡Œäº‘å‡­è¯)

[//]: # ()
[//]: # (1. **ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°**)

[//]: # (   - è®¿é—®ï¼šhttps://ram.console.aliyun.com/)

[//]: # ()
[//]: # (2. **åˆ›å»ºAccessKey**)

[//]: # (   - è¿›å…¥"è®¿é—®æ§åˆ¶" â†’ "ç”¨æˆ·" â†’ "åˆ›å»ºç”¨æˆ·")

[//]: # (   - å‹¾é€‰"OpenAPIè°ƒç”¨è®¿é—®")

[//]: # (   - ä¿å­˜ AccessKey ID å’Œ AccessKey Secret)

[//]: # ()
[//]: # (3. **æˆæƒçŸ­ä¿¡æœåŠ¡**)

[//]: # (   - ä¸ºç”¨æˆ·æ·»åŠ æƒé™ï¼š`AliyunDypnsFullAccess`)

[//]: # ()
[//]: # (### ç¬¬å››æ­¥ï¼šé…ç½®çŸ­ä¿¡æ¨¡æ¿)

[//]: # ()
[//]: # (1. **ç™»å½•é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡æ§åˆ¶å°**)

[//]: # (   - è®¿é—®ï¼šhttps://dysms.console.aliyun.com/)

[//]: # ()
[//]: # (2. **åˆ›å»ºç­¾å**)

[//]: # (   - ç­¾ååç§°ï¼š`é€Ÿé€šäº’è”éªŒè¯ç `)

[//]: # (   - ç­¾åç±»å‹ï¼šéªŒè¯ç )

[//]: # (   - é€‚ç”¨åœºæ™¯ï¼šé€šç”¨)

[//]: # ()
[//]: # (3. **åˆ›å»ºæ¨¡æ¿**)

[//]: # (   - æ¨¡æ¿CODEï¼š`100001`ï¼ˆæˆ–å…¶ä»–ï¼‰)

[//]: # (   - æ¨¡æ¿å†…å®¹ï¼š`æ‚¨çš„éªŒè¯ç æ˜¯${code}ï¼Œ${min}åˆ†é’Ÿå†…æœ‰æ•ˆã€‚`)

[//]: # (   - æ¨¡æ¿å˜é‡ï¼š`code`, `min`)

[//]: # ()
[//]: # (---)

[//]: # ()
[//]: # (## ğŸ§ª æµ‹è¯•éªŒè¯)

[//]: # ()
[//]: # (### 1. ç¼–è¯‘é¡¹ç›®)

[//]: # ()
[//]: # (```bash)

[//]: # (cd /Users/sylvainyang/project/elysia/elysia-backend)

[//]: # (go build -o elysia-backend)

[//]: # (```)

[//]: # ()
[//]: # (### 2. è¿è¡ŒæœåŠ¡)

[//]: # ()
[//]: # (```bash)

[//]: # (./elysia-backend)

[//]: # (```)

[//]: # ()
[//]: # (### 3. æµ‹è¯•çŸ­ä¿¡å‘é€)

[//]: # ()
[//]: # (#### å­¦ç”Ÿæ³¨å†ŒéªŒè¯ç )

[//]: # (```bash)

[//]: # (curl -X POST http://localhost:8001/api/student/auth/send-register-code \)

[//]: # (  -H "Content-Type: application/json" \)

[//]: # (  -d '{"phone_number": "18873197041"}')

[//]: # (```)

[//]: # ()
[//]: # (#### å­¦ç”Ÿç™»å½•éªŒè¯ç )

[//]: # (```bash)

[//]: # (curl -X POST http://localhost:8001/api/student/auth/send-login-code \)

[//]: # (  -H "Content-Type: application/json" \)

[//]: # (  -d '{"phone_number": "18873197041"}')

[//]: # (```)

[//]: # ()
[//]: # (#### æ•™å¸ˆæ³¨å†ŒéªŒè¯ç )

[//]: # (```bash)

[//]: # (curl -X POST http://localhost:8001/api/teacher/auth/send-register-code \)

[//]: # (  -H "Content-Type: application/json" \)

[//]: # (  -d '{"phone_number": "18873197041"}')

[//]: # (```)

[//]: # ()
[//]: # (#### æ•™å¸ˆç™»å½•éªŒè¯ç )

[//]: # (```bash)

[//]: # (curl -X POST http://localhost:8001/api/teacher/auth/send-login-code \)

[//]: # (  -H "Content-Type: application/json" \)

[//]: # (  -d '{"phone_number": "18873197041"}')

[//]: # (```)

[//]: # ()
[//]: # (#### ç®¡ç†å‘˜ç™»å½•éªŒè¯ç )

[//]: # (```bash)

[//]: # (curl -X POST http://localhost:8001/api/admin/auth/send-login-code \)

[//]: # (  -H "Content-Type: application/json" \)

[//]: # (  -d '{"phone_number": "18873197041"}')

[//]: # (```)

[//]: # ()
[//]: # (### 4. é¢„æœŸç»“æœ)

[//]: # ()
[//]: # (**æˆåŠŸå“åº”**ï¼š)

[//]: # (```json)

[//]: # ({)

[//]: # (  "code": 200,)

[//]: # (  "message": "éªŒè¯ç å‘é€æˆåŠŸ",)

[//]: # (  "data": null)

[//]: # (})

[//]: # (```)

[//]: # ()
[//]: # (**å¤±è´¥å“åº”**ï¼š)

[//]: # (```json)

[//]: # ({)

[//]: # (  "code": 500,)

[//]: # (  "message": "å‘é€çŸ­ä¿¡å¤±è´¥: å…·ä½“é”™è¯¯ä¿¡æ¯",)

[//]: # (  "data": null)

[//]: # (})

[//]: # (```)

[//]: # ()
[//]: # (---)

[//]: # ()
[//]: # (## ğŸ“ ä»£ç å®ç°è¯¦è§£)

[//]: # ()
[//]: # (### AliyunSMSClient ç»“æ„)

[//]: # ()
[//]: # (```go)

[//]: # (type AliyunSMSClient struct {)

[//]: # (    client *dypnsapi20170525.Client)

[//]: # (})

[//]: # (```)

[//]: # ()
[//]: # (### åˆå§‹åŒ–å®¢æˆ·ç«¯)

[//]: # ()
[//]: # (```go)

[//]: # (func NewAliyunSMSClient&#40;&#41; *AliyunSMSClient {)

[//]: # (    client, err := createAliyunClient&#40;&#41;)

[//]: # (    if err != nil {)

[//]: # (        fmt.Printf&#40;"åˆ›å»ºé˜¿é‡Œäº‘çŸ­ä¿¡å®¢æˆ·ç«¯å¤±è´¥: %v\n", err&#41;)

[//]: # (        return nil)

[//]: # (    })

[//]: # (    return &AliyunSMSClient{)

[//]: # (        client: client,)

[//]: # (    })

[//]: # (})

[//]: # (```)

[//]: # ()
[//]: # (### å‘é€éªŒè¯ç )

[//]: # ()
[//]: # (```go)

[//]: # (func &#40;c *AliyunSMSClient&#41; SendVerificationCode&#40;phoneNumber, code, templateCode string&#41; error {)

[//]: # (    signName := os.Getenv&#40;"ALIYUN_SMS_SIGN_NAME"&#41;)

[//]: # (    templateParam := fmt.Sprintf&#40;`{"code":"%s","min":"5"}`, code&#41;)

[//]: # (    )
[//]: # (    sendSmsVerifyCodeRequest := &dypnsapi20170525.SendSmsVerifyCodeRequest{)

[//]: # (        SignName:      tea.String&#40;signName&#41;,)

[//]: # (        TemplateCode:  tea.String&#40;templateCode&#41;,)

[//]: # (        PhoneNumber:   tea.String&#40;phoneNumber&#41;,)

[//]: # (        TemplateParam: tea.String&#40;templateParam&#41;,)

[//]: # (    })

[//]: # (    )
[//]: # (    runtime := &util.RuntimeOptions{})

[//]: # (    resp, err := c.client.SendSmsVerifyCodeWithOptions&#40;sendSmsVerifyCodeRequest, runtime&#41;)

[//]: # (    )
[//]: # (    // é”™è¯¯å¤„ç†...)

[//]: # (    return nil)

[//]: # (})

[//]: # (```)

[//]: # ()
[//]: # (---)

[//]: # ()
[//]: # (## ğŸ” å¸¸è§é—®é¢˜)

[//]: # ()
[//]: # (### Q1: å¦‚ä½•è·å–é˜¿é‡Œäº‘AccessKeyï¼Ÿ)

[//]: # (**A**: ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å° â†’ è®¿é—®æ§åˆ¶&#40;RAM&#41; â†’ ç”¨æˆ· â†’ åˆ›å»ºç”¨æˆ· â†’ å‹¾é€‰"OpenAPIè°ƒç”¨è®¿é—®")

[//]: # ()
[//]: # (### Q2: çŸ­ä¿¡å‘é€å¤±è´¥æ€ä¹ˆåŠï¼Ÿ)

[//]: # (**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š)

[//]: # (1. AccessKey æ˜¯å¦æ­£ç¡®é…ç½®)

[//]: # (2. ç”¨æˆ·æ˜¯å¦æœ‰çŸ­ä¿¡æœåŠ¡æƒé™)

[//]: # (3. ç­¾åå’Œæ¨¡æ¿æ˜¯å¦å·²å®¡æ ¸é€šè¿‡)

[//]: # (4. æ‰‹æœºå·æ ¼å¼æ˜¯å¦æ­£ç¡®)

[//]: # (5. è´¦æˆ·ä½™é¢æ˜¯å¦å……è¶³)

[//]: # ()
[//]: # (### Q3: å¦‚ä½•æŸ¥çœ‹çŸ­ä¿¡å‘é€è®°å½•ï¼Ÿ)

[//]: # (**A**: ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å° â†’ çŸ­ä¿¡æœåŠ¡ â†’ å‘é€è®°å½•)

[//]: # ()
[//]: # (### Q4: æ¨¡æ¿å‚æ•°æ ¼å¼æ˜¯ä»€ä¹ˆï¼Ÿ)

[//]: # (**A**: JSONæ ¼å¼ï¼Œä¾‹å¦‚ï¼š`{"code":"123456","min":"5"}`)

[//]: # ()
[//]: # (### Q5: æ”¯æŒå›½é™…çŸ­ä¿¡å—ï¼Ÿ)

[//]: # (**A**: æ”¯æŒï¼Œä½†éœ€è¦åœ¨é˜¿é‡Œäº‘æ§åˆ¶å°å¼€é€šå›½é™…çŸ­ä¿¡æœåŠ¡)

[//]: # ()
[//]: # (---)

[//]: # ()
[//]: # (## ğŸš¨ æ³¨æ„äº‹é¡¹)

[//]: # ()
[//]: # (### å®‰å…¨å»ºè®®)

[//]: # (1. âœ… **ä¸è¦**å°† AccessKey æäº¤åˆ°ä»£ç ä»“åº“)

[//]: # (2. âœ… **ä½¿ç”¨**ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶ç®¡ç†å‡­è¯)

[//]: # (3. âœ… **å®šæœŸ**è½®æ¢ AccessKey)

[//]: # (4. âœ… **éµå¾ª**æœ€å°æƒé™åŸåˆ™)

[//]: # ()
[//]: # (### æˆæœ¬æ§åˆ¶)

[//]: # (1. çŸ­ä¿¡æŒ‰æ¡è®¡è´¹ï¼Œæ³¨æ„æ§åˆ¶å‘é€é¢‘ç‡)

[//]: # (2. å»ºè®®è®¾ç½®å‘é€é¢‘ç‡é™åˆ¶ï¼ˆå½“å‰ï¼š60ç§’/æ¬¡ï¼‰)

[//]: # (3. ç›‘æ§çŸ­ä¿¡å‘é€é‡ï¼Œé¿å…æ¶æ„åˆ·çŸ­ä¿¡)

[//]: # ()
[//]: # (### é”™è¯¯å¤„ç†)

[//]: # (1. æ‰€æœ‰é”™è¯¯éƒ½ä¼šè®°å½•åˆ°æ—¥å¿—)

[//]: # (2. å‘é€å¤±è´¥ä¼šè‡ªåŠ¨åˆ é™¤Redisä¸­çš„éªŒè¯ç )

[//]: # (3. å»ºè®®é…ç½®å‘Šè­¦ç›‘æ§)

[//]: # ()
[//]: # (---)

[//]: # ()
[//]: # (## ğŸ“š å‚è€ƒæ–‡æ¡£)

[//]: # ()
[//]: # (- [é˜¿é‡Œäº‘å·ç è®¤è¯æœåŠ¡æ–‡æ¡£]&#40;https://help.aliyun.com/product/75010.html&#41;)

[//]: # (- [é˜¿é‡Œäº‘Go SDKæ–‡æ¡£]&#40;https://help.aliyun.com/document_detail/378661.html&#41;)

[//]: # (- [çŸ­ä¿¡æœåŠ¡APIå‚è€ƒ]&#40;https://api.aliyun.com/product/Dypnsapi&#41;)

[//]: # (- [å‡­è¯é…ç½®æŒ‡å—]&#40;https://help.aliyun.com/document_detail/378661.html&#41;)

[//]: # ()
[//]: # (---)

[//]: # ()
[//]: # (## âœ… è¿ç§»æ£€æŸ¥æ¸…å•)

[//]: # ()
[//]: # (- [x] æ›´æ–° `utils/sms_util.go` æ–‡ä»¶)

[//]: # (- [x] æ›´æ–° `service/sms_service.go` æ–‡ä»¶)

[//]: # (- [x] æ›´æ–° `go.mod` ä¾èµ–)

[//]: # (- [x] æ›´æ–° `.env.example` é…ç½®)

[//]: # (- [ ] å®‰è£…æ–°ä¾èµ–åŒ…)

[//]: # (- [ ] é…ç½®é˜¿é‡Œäº‘å‡­è¯)

[//]: # (- [ ] åˆ›å»ºçŸ­ä¿¡ç­¾å)

[//]: # (- [ ] åˆ›å»ºçŸ­ä¿¡æ¨¡æ¿)

[//]: # (- [ ] æ›´æ–° `.env` æ–‡ä»¶)

[//]: # (- [ ] æµ‹è¯•å­¦ç”Ÿæ³¨å†ŒéªŒè¯ç )

[//]: # (- [ ] æµ‹è¯•å­¦ç”Ÿç™»å½•éªŒè¯ç )

[//]: # (- [ ] æµ‹è¯•æ•™å¸ˆæ³¨å†ŒéªŒè¯ç )

[//]: # (- [ ] æµ‹è¯•æ•™å¸ˆç™»å½•éªŒè¯ç )

[//]: # (- [ ] æµ‹è¯•ç®¡ç†å‘˜ç™»å½•éªŒè¯ç )

[//]: # (- [ ] éªŒè¯é”™è¯¯å¤„ç†)

[//]: # (- [ ] éªŒè¯é¢‘ç‡é™åˆ¶)

[//]: # (- [ ] éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ)

[//]: # ()
[//]: # (---)

[//]: # ()
[//]: # (## ğŸ‰ è¿ç§»å®Œæˆ)

[//]: # ()
[//]: # (æ­å–œï¼ä½ å·²ç»æˆåŠŸå°†çŸ­ä¿¡æœåŠ¡ä»è…¾è®¯äº‘è¿ç§»åˆ°é˜¿é‡Œäº‘ã€‚)

[//]: # ()
[//]: # (å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·å‚è€ƒä¸Šè¿°æ–‡æ¡£æˆ–è”ç³»æŠ€æœ¯æ”¯æŒã€‚)

[//]: # ()
[//]: # (**ç¥ä½¿ç”¨æ„‰å¿«ï¼** ğŸš€)
